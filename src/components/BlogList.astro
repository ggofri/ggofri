---
import { getCollection } from 'astro:content';
import FormattedDate from './ui/FormattedDate.astro';

const posts = await getCollection('blog');
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<div class="space-y-8">
  {posts.map((post) => (
    <article class="pb-8 border-b border-border last:border-b-0">
      <a href={`/blog/${post.id}`} class="group">
        <h2 class="text-lg font-semibold mb-2 group-hover:text-muted-foreground transition-colors">
          {post.data.title}
        </h2>
      </a>
      <p class="text-sm text-muted-foreground mb-3">
        <FormattedDate date={post.data.pubDate} />
      </p>
      <p class="text-muted-foreground text-sm leading-relaxed">{post.data.description}</p>
    </article>
  ))}
</div>